{{if .rules}}
<div class="rules-list">
    {{range .rules}}
    <div class="rule-card">
        <div class="rule-status {{if not .Enabled}}disabled{{end}}"></div>
        
        <div class="rule-info">
            <div class="rule-field">
                <span class="rule-label">Target</span>
                <span class="rule-value">{{.Target}}</span>
            </div>
            
            <div class="rule-field">
                <span class="rule-label">Metric</span>
                <span class="rule-value">
                    {{if eq .Metric "cpu"}}CPU
                    {{else if eq .Metric "memory"}}Memory
                    {{else if eq .Metric "network"}}Network
                    {{else if eq .Metric "disk"}}Disk I/O
                    {{else}}{{.Metric}}{{end}}
                </span>
            </div>
            
            <div class="rule-field">
                <span class="rule-label">Condition</span>
                <span class="rule-condition">
                    {{.Operator}} {{.Threshold}}{{if eq .Metric "cpu"}}%{{else if eq .Metric "memory"}}%{{else}} MB/s{{end}}
                </span>
            </div>
            
            <div class="rule-field">
                <span class="rule-label">Wait Time</span>
                <span class="rule-value" title="Alert triggers after condition is true for this duration">
                    {{if eq .DurationSeconds 30}}30s
                    {{else if eq .DurationSeconds 60}}1m
                    {{else if eq .DurationSeconds 120}}2m
                    {{else if eq .DurationSeconds 300}}5m
                    {{else}}{{.DurationSeconds}}s{{end}}
                </span>
            </div>
            
            <div class="rule-field">
                <span class="rule-label">Discord Freq</span>
                <span class="rule-value" title="How often Discord notifications are sent for active alerts">
                    {{if eq .DiscordFrequencyMinutes 1}}1m
                    {{else if eq .DiscordFrequencyMinutes 5}}5m
                    {{else if eq .DiscordFrequencyMinutes 15}}15m
                    {{else if eq .DiscordFrequencyMinutes 30}}30m
                    {{else if eq .DiscordFrequencyMinutes 60}}1h
                    {{else}}{{.DiscordFrequencyMinutes}}m{{end}}
                </span>
            </div>
        </div>
        
        <div class="rule-actions">
            <button class="btn-edit" onclick="editRule('{{.ID}}')">
                Edit
            </button>
            <button class="btn-toggle" onclick="toggleRule('{{.ID}}', {{.Enabled}})">
                {{if .Enabled}}Disable{{else}}Enable{{end}}
            </button>
            <button class="btn-delete" onclick="deleteRule('{{.ID}}')">
                Delete
            </button>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="empty-rules">
    <h3>No alert rules configured</h3>
    <p>Create your first alert rule to start monitoring this node</p>
    <button class="create-btn" onclick="showModal()" style="margin-top: 16px;">+ Create Your First Rule</button>
</div>
{{end}}